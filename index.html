<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
<meta name="theme-color" content="#DDE6FF">
<title>Light the Cracker Within - Diwali 2024</title>
<link rel="preconnect" href="https://framerusercontent.com">
<link rel="preconnect" href="https://i.imgur.com">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}html{font-size:16px;-webkit-text-size-adjust:100%}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#DDE6FF 0%,#fff 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;overflow-x:hidden;touch-action:manipulation}.container{max-width:700px;width:100%}.card{background:#fff;border-radius:24px;box-shadow:0 20px 60px rgba(0,0,0,0.15);padding:40px;text-align:center;position:relative}.logo{width:140px;height:140px;margin:0 auto 20px}.logo img{width:100%;height:100%;object-fit:contain}.firework{font-size:60px;margin-bottom:12px;animation:sparkle 3s ease-in-out infinite}@keyframes sparkle{0%,100%{transform:rotate(0deg) scale(1)}50%{transform:rotate(10deg) scale(1.1)}}h1{color:#32509F;font-size:42px;font-weight:700;margin-bottom:28px;line-height:1.2}h1.orange{color:#F77F00}h2{color:#32509F;font-size:28px;font-weight:700;margin-bottom:20px;line-height:1.3}.progress{position:relative;margin-bottom:40px;padding:0 20px}.fuse{width:100%;height:8px;background:linear-gradient(90deg,#8B4513 0%,#654321 100%);border-radius:4px;position:relative;box-shadow:inset 0 2px 4px rgba(0,0,0,0.3);margin-bottom:100px}.spark{position:absolute;left:0;top:50%;transform:translate(-50%,-50%);width:28px;height:28px;transition:left .5s ease}.flame{width:100%;height:100%;background:radial-gradient(circle,#FFD700 0%,#FF6B00 30%,#FF0000 60%,transparent 80%);border-radius:50%;animation:flicker .15s infinite alternate;filter:blur(1px)}.core{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:10px;height:10px;background:#FFF;border-radius:50%;box-shadow:0 0 10px #FFD700,0 0 20px #FF6B00}@keyframes flicker{0%{transform:scale(1) rotate(0deg);opacity:.9}100%{transform:scale(1.4) rotate(15deg);opacity:1}}.cracker{position:absolute;right:-60px;top:-25px;filter:drop-shadow(3px 3px 6px rgba(0,0,0,0.2))}.display{margin:35px 0;position:relative}.sweet{width:260px;height:260px;margin:20px auto;object-fit:contain;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.1))}.blast{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.3);z-index:9997;display:flex;align-items:center;justify-content:center}.blast-container{position:relative;z-index:9998}.blast-icon{font-size:140px;animation:pulse .5s infinite;text-shadow:0 0 40px rgba(255,107,0,0.8)}@keyframes pulse{0%,100%{transform:scale(1) rotate(-5deg)}50%{transform:scale(1.4) rotate(5deg)}}.wave{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;border:3px solid #F77F00;border-radius:50%;animation:wave 1s ease-out infinite}@keyframes wave{0%{width:80px;height:80px;opacity:1}100%{width:400px;height:400px;opacity:0}}input{width:100%;padding:18px 24px;border:2px solid #32509F;border-radius:12px;font-size:18px;text-align:center;color:#32509F;margin-bottom:20px;outline:none;transition:all .3s}input:focus{border-color:#F77F00;box-shadow:0 0 0 3px rgba(247,127,0,0.1)}input.error{border-color:#DC2626}.error-text{color:#DC2626;font-size:15px;margin-top:-12px;margin-bottom:20px}button{background:#F77F00;color:#fff;border:none;padding:18px 32px;border-radius:12px;font-size:20px;font-weight:700;cursor:pointer;width:100%;transition:all .3s;box-shadow:0 4px 12px rgba(247,127,0,0.3);touch-action:manipulation}button:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(247,127,0,0.4)}button:active:not(:disabled){transform:translateY(0)}button:disabled{opacity:.5;cursor:not-allowed}.btn-back{background:#fff;color:#F77F00;border:2px solid #F77F00;margin-top:12px;font-size:17px;padding:14px 28px;box-shadow:none}.btn-primary{background:#32509F;box-shadow:0 4px 12px rgba(50,80,159,0.3)}.options{display:grid;gap:14px;margin:28px 0}.option{background:#fff;border:2px solid #32509F;color:#32509F;padding:18px;border-radius:14px;font-size:17px;text-align:left;transition:all .3s;cursor:pointer;line-height:1.5}.option:hover{background:#DDE6FF;transform:translateY(-2px);box-shadow:0 4px 12px rgba(50,80,159,0.2)}.option:active{transform:translateY(0)}.counter{color:#F77F00;font-size:15px;font-weight:700;margin-bottom:20px}.result-title{font-size:44px;color:#F77F00;font-weight:700;margin:20px 0}.result-sub{font-size:26px;color:#32509F;font-weight:600;margin-bottom:20px}.result-msg{font-size:22px;color:#32509F;font-weight:500;margin-bottom:20px;line-height:1.5}.line{font-size:18px;color:#4B5563;margin:12px 0;line-height:1.6}.footer{font-size:20px;color:#32509F;font-weight:600;font-style:italic;margin-top:28px;padding-top:28px;border-top:2px solid #DDE6FF}.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:28px}.disclaimer{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;transition:opacity .3s ease;padding:20px}.disclaimer.show{opacity:1}.disclaimer.hide{opacity:0}.disclaimer-card{background:#fff;border-radius:20px;padding:40px;max-width:500px;width:100%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.3);transform:scale(.9);transition:transform .3s ease}.disclaimer.show .disclaimer-card{transform:scale(1)}.hidden{display:none!important}.loading{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10000;color:#fff}.spinner{width:50px;height:50px;border:4px solid rgba(255,255,255,0.3);border-top-color:#F77F00;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}@keyframes spin{to{transform:rotate(360deg)}}.particle{position:fixed;pointer-events:none;z-index:9999}.confetti{position:fixed;width:10px;height:10px;z-index:9998;pointer-events:none}@keyframes fall{to{transform:translateY(100vh) rotate(720deg);opacity:0}}.sparkle-line{position:absolute;width:40px;height:3px;border-radius:2px;transform-origin:center}@keyframes shoot{0%{opacity:1;transform:translate(0,0) scale(1)}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(.3)}}.star{position:fixed;pointer-events:none;z-index:9999;font-size:24px}@keyframes float{0%{opacity:1;transform:translate(0,0) rotate(0deg) scale(1)}100%{opacity:0;transform:translate(var(--tx),var(--ty)) rotate(360deg) scale(.5)}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@media(max-width:768px){html{font-size:18px}body{padding:16px 12px}.card{padding:32px 24px;border-radius:20px}.logo{width:120px;height:120px}.firework{font-size:52px}h1{font-size:36px;margin-bottom:24px;line-height:1.2}h2{font-size:26px;line-height:1.4;margin-bottom:20px}.result-title{font-size:40px;margin:16px 0}.result-sub{font-size:24px;margin-bottom:16px}.result-msg{font-size:20px;line-height:1.6}.line{font-size:17px;line-height:1.7}.footer{font-size:19px;margin-top:24px;padding-top:24px}.grid{grid-template-columns:1fr;gap:12px}.sweet{width:240px;height:240px;margin:20px auto}.progress{padding:0 16px;margin-bottom:36px}.fuse{height:8px;margin-bottom:90px}.cracker{right:-55px;top:-22px}.blast-icon{font-size:120px}.option{font-size:17px;padding:18px 16px;line-height:1.5}button{font-size:19px;padding:18px 32px;border-radius:14px}input{font-size:18px;padding:18px 24px}.disclaimer-card{padding:32px 24px}.disclaimer-card h2{font-size:26px}.disclaimer-card p{font-size:17px}}@media(max-width:480px){html{font-size:17px}.card{padding:28px 20px}h1{font-size:32px}h2{font-size:24px}.result-title{font-size:36px}.sweet{width:220px;height:220px}.logo{width:110px;height:110px}}@media(max-width:380px){html{font-size:16px}h1{font-size:28px}.result-title{font-size:32px}.sweet{width:200px;height:200px}.cracker{right:-45px;transform:scale(.85)}}.preload{position:absolute;width:1px;height:1px;overflow:hidden;opacity:0;pointer-events:none}
</style>
</head>
<body>
<div class="preload">
<img src="https://i.imgur.com/tFONffe.png" alt=""><img src="https://i.imgur.com/NfuocXK.png" alt=""><img src="https://i.imgur.com/kAOYFVM.png" alt=""><img src="https://i.imgur.com/xA3gnAQ.png" alt=""><img src="https://i.imgur.com/NY5QUQs.png" alt=""><img src="https://i.imgur.com/hIuZMOj.png" alt="">
</div>
<div id="disclaimer" class="disclaimer hidden">
<div class="disclaimer-card">
<div style="font-size:72px;margin-bottom:20px">🎆</div>
<h2>Cracker lit!</h2>
<p style="font-size:18px;color:#4B5563;margin:20px 0;line-height:1.6">Give 5 quick responses to blast the <strong>Flower-pot!</strong></p>
<p style="font-size:18px;color:#4B5563;margin:20px 0;line-height:1.6">Your responses are <strong>NOT stored anywhere</strong> – answer honestly for the best blast.</p>
</div>
</div>
<div id="landing" class="container">
<div class="progress">
<div class="fuse">
<div class="spark" style="left:0%">
<div class="flame"></div>
<div class="core"></div>
</div>
</div>
<div class="cracker">
<svg width="120" height="140" viewBox="0 0 120 140">
<defs>
<linearGradient id="r" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#8B1538;stop-opacity:1"/>
<stop offset="100%" style="stop-color:#6B0F2A;stop-opacity:1"/>
</linearGradient>
<linearGradient id="y" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#FFD700;stop-opacity:1"/>
<stop offset="100%" style="stop-color:#FFA500;stop-opacity:1"/>
</linearGradient>
</defs>
<path d="M 60 20 L 30 120 L 90 120 Z" fill="#8B1538"/>
<path d="M 60 20 L 35 95 L 85 95 L 84 100 L 36 100 L 30 120 L 90 120 L 60 20 Z" fill="url(#y)"/>
<path d="M 60 20 L 40 75 L 80 75 L 79 80 L 41 80 L 35 95 L 85 95 L 60 20 Z" fill="url(#r)"/>
<path d="M 60 20 L 45 55 L 75 55 L 74 60 L 46 60 L 40 75 L 80 75 L 60 20 Z" fill="url(#y)"/>
<path d="M 60 20 L 50 35 L 70 35 L 69 40 L 51 40 L 45 55 L 75 55 L 60 20 Z" fill="url(#r)"/>
<polygon points="30,120 90,120 85,125 35,125" fill="#FFA500"/>
<line x1="60" y1="20" x2="60" y2="5" stroke="#654321" stroke-width="3" stroke-linecap="round"/>
<circle cx="60" cy="5" r="4" fill="#FF6B00">
<animate attributeName="r" values="4;6;4" dur="0.4s" repeatCount="indefinite"/>
</circle>
</svg>
</div>
</div>
<div class="card">
<div class="logo"><img src="https://framerusercontent.com/images/otpXuKdG3uW4Up8ICaqstwvlg4o.png?scale-down-to=512" alt="Make Eazy"></div>
<div class="firework">🎆</div>
<h1>Light the Cracker Within! 🎇</h1>
<div class="display">
<svg width="140" height="160" viewBox="0 0 120 140">
<path d="M 60 20 L 30 120 L 90 120 Z" fill="#8B1538"/>
<path d="M 60 20 L 35 95 L 85 95 L 84 100 L 36 100 L 30 120 L 90 120 L 60 20 Z" fill="url(#y)"/>
<path d="M 60 20 L 40 75 L 80 75 L 79 80 L 41 80 L 35 95 L 85 95 L 60 20 Z" fill="url(#r)"/>
<path d="M 60 20 L 45 55 L 75 55 L 74 60 L 46 60 L 40 75 L 80 75 L 60 20 Z" fill="url(#y)"/>
<path d="M 60 20 L 50 35 L 70 35 L 69 40 L 51 40 L 45 55 L 75 55 L 60 20 Z" fill="url(#r)"/>
<polygon points="30,120 90,120 85,125 35,125" fill="#FFA500"/>
<line x1="60" y1="20" x2="60" y2="5" stroke="#654321" stroke-width="3" stroke-linecap="round"/>
<circle cx="60" cy="5" r="4" fill="#FF6B00">
<animate attributeName="r" values="4;6;4" dur="0.4s" repeatCount="indefinite"/>
</circle>
</svg>
</div>
<input type="text" id="nameInput" placeholder="Enter your name" maxlength="30">
<div id="nameError" class="error-text hidden"></div>
<button id="startBtn" onclick="start()">Light It! 🔥</button>
</div>
</div>
<div id="questions" class="container hidden">
<div class="progress">
<div class="fuse">
<div id="qSpark" class="spark" style="left:0%">
<div class="flame"></div>
<div class="core"></div>
</div>
</div>
<div class="cracker">
<svg width="120" height="140" viewBox="0 0 120 140">
<defs>
<linearGradient id="r2" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#8B1538;stop-opacity:1"/>
<stop offset="100%" style="stop-color:#6B0F2A;stop-opacity:1"/>
</linearGradient>
<linearGradient id="y2" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#FFD700;stop-opacity:1"/>
<stop offset="100%" style="stop-color:#FFA500;stop-opacity:1"/>
</linearGradient>
</defs>
<path d="M 60 20 L 30 120 L 90 120 Z" fill="#8B1538"/>
<path d="M 60 20 L 35 95 L 85 95 L 84 100 L 36 100 L 30 120 L 90 120 L 60 20 Z" fill="url(#y2)"/>
<path d="M 60 20 L 40 75 L 80 75 L 79 80 L 41 80 L 35 95 L 85 95 L 60 20 Z" fill="url(#r2)"/>
<path d="M 60 20 L 45 55 L 75 55 L 74 60 L 46 60 L 40 75 L 80 75 L 60 20 Z" fill="url(#y2)"/>
<path d="M 60 20 L 50 35 L 70 35 L 69 40 L 51 40 L 45 55 L 75 55 L 60 20 Z" fill="url(#r2)"/>
<polygon points="30,120 90,120 85,125 35,125" fill="#FFA500"/>
<line x1="60" y1="20" x2="60" y2="5" stroke="#654321" stroke-width="3" stroke-linecap="round"/>
<circle cx="60" cy="5" r="4" fill="#FF6B00">
<animate attributeName="r" values="4;6;4" dur="0.4s" repeatCount="indefinite"/>
</circle>
</svg>
</div>
</div>
<div class="card">
<div id="counter" class="counter"></div>
<h2 id="qText"></h2>
<div id="opts" class="options"></div>
<button id="back" class="btn-back" onclick="goBack()" style="display:none">← Go Back & Change Answer</button>
</div>
</div>
<div id="blast" class="blast hidden">
<div class="blast-container">
<div class="blast-icon">💥</div>
<div class="wave"></div>
<div class="wave" style="animation-delay:.2s"></div>
<div class="wave" style="animation-delay:.4s"></div>
</div>
</div>
<div id="result" class="container hidden">
<div class="card" id="card">
<div class="logo"><img src="https://framerusercontent.com/images/otpXuKdG3uW4Up8ICaqstwvlg4o.png?scale-down-to=512" alt="Make Eazy" id="logo"></div>
<h1 class="orange" style="font-size:38px;margin:8px 0 4px 0">Light the Cracker Within!</h1>
<h1 style="font-size:36px;margin:4px 0 12px 0">Happy Diwali! 🎆</h1>
<h2 style="color:#F77F00;font-size:36px;margin:12px 0 20px 0" id="userName"></h2>
<img id="sweet" class="sweet" src="" alt="Sweet">
<div class="result-title" id="rSweet"></div>
<div class="result-sub" id="rTitle"></div>
<p class="result-msg" id="rMsg"></p>
<div id="lines"></div>
<div class="footer">"Unique sweets. Unique you. Shine with purpose this Diwali."<div style="margin-top:20px;font-size:15px;color:#F77F00;font-weight:700">Team Makeeazy</div></div>
</div>
<div class="grid">
<button class="btn-primary" onclick="download()">📥 Download Card</button>
<button onclick="share()">🎁 Share this Gift</button>
</div>
<div class="grid" style="margin-top:14px">
<button class="btn-back" onclick="location.reload()" style="width:100%;grid-column:1/-1">🔄 Retake Quiz</button>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
let n='',a={},q=0,r=null;const imgs={P:'https://i.imgur.com/tFONffe.png',B:'https://i.imgur.com/NfuocXK.png',L:'https://i.imgur.com/kAOYFVM.png',K:'https://i.imgur.com/xA3gnAQ.png',J:'https://i.imgur.com/NY5QUQs.png',G:'https://i.imgur.com/hIuZMOj.png'};function preload(){Object.values(imgs).forEach(s=>{const i=new Image();i.crossOrigin='anonymous';i.src=s})}preload();const cfg={s:{P:{n:'Pootharekulu',t:'The Calm Thinker',m:'Quiet outside, powerful inside. Slow glows last longest.',i:imgs.P},B:{n:'Bobbatlu',t:'The Warm Soul',m:'You comfort and restore. Save a slice of that warmth for yourself.',i:imgs.B},L:{n:'Laddu',t:'The Joy Giver',m:'You make messes feel festive. Your laughter is a light.',i:imgs.L},K:{n:'Kaja',t:'The Achiever',m:"Crisp under pressure. You didn't break—you caramelized.",i:imgs.K},J:{n:'Jalebi',t:'The Spirited One',m:'Twists, turns, still sweet. Your optimism is the plot twist.',i:imgs.J},G:{n:'Gulab Jamun',t:'The Soft Healer',m:"Soft isn't weak. Your kindness holds things together.",i:imgs.G}},w:{Q1:1.5,Q2:1,Q3:1.5,Q4:1,Q5:1},m:{Q1:{A:'P',B:'B',C:'J',D:'K'},Q2:{A:'J',B:'K',C:'L',D:'P'},Q3:{A:'P',B:'B',C:'J',D:'K'},Q4:{A:'P',B:'G',C:'L',D:'G'},Q5:{A:'P',B:'L',C:'J',D:'K'}},p:[['P','B','G'],['L','J','J'],['K','L','K'],['K','P','K'],['B','L','B'],['P','J','P'],['K','J','K'],['G','P','G'],['G','B','G']],t:{A:'P',B:'L',C:'J',D:'K'}},qs=[{q:'How did you deal with chaos this year?',o:[{k:'A',t:'I turned into Buddha with Wi-Fi. 🧘‍♂️'},{k:'B',t:'Fed people biryani till they calmed down. 🍛'},{k:'C',t:'Laughed… then cried… then laughed again. 😂🥲'},{k:'D',t:"I didn't deal, I managed – then jumped over it. 🧠"}]},{q:'How often did you actually take a break this year?',o:[{k:'A',t:'Break? Like… emotional or screen time? 😅'},{k:'B',t:'Once, when Wi-Fi went off for 2 hours. ⚡'},{k:'C',t:'Every weekend… mentally, not physically. 😌'},{k:'D',t:'Every day – because I work smart, not hard. 💼'}]},{q:'Which line sums up your 2025 vibe?',o:[{k:'A',t:"I survived. That's the caption. 😶"},{k:'B',t:'Still feeding people, still healing myself. 🍲'},{k:'C',t:"Life's a mess, but it's my kinda mess. 💃"},{k:'D',t:'Error 404: Life not found. 🧳'}]},{q:'What did you secretly crave the most this year?',o:[{k:'A',t:'Silence, peace, less notifications. 🔵'},{k:'B',t:'Someone who says, I got you. ❤️'},{k:'C',t:'More laughter, less drama. 😂'},{k:'D',t:"A break that doesn't involve guilt. 💤"}]},{q:'How do you hype yourself up when life drags you down?',o:[{k:'A',t:"It's okay, slow progress still counts. 🌙"},{k:'B',t:'Eat, sleep, repeat confidence. 🍛'},{k:'C',t:'Make a meme out of it, obviously. 🤳'},{k:'D',t:"Stand up, fix hair, and pretend I've got it together. 😎"}]}];function sound(i=1){try{const c=new(window.AudioContext||window.webkitAudioContext)(),b=c.sampleRate*(.3+i*.4),bf=c.createBuffer(1,b,c.sampleRate),d=bf.getChannelData(0);for(let x=0;x<b;x++)d[x]=(Math.random()*2-1)*.3*i;const s=c.createBufferSource();s.buffer=bf;const f=c.createBiquadFilter();f.type='bandpass';f.frequency.value=2000+(i*2000);f.Q.value=1;const g=c.createGain(),v=.2*i;g.gain.setValueAtTime(v,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+(.3+i*.4));s.connect(f);f.connect(g);g.connect(c.destination);s.start();s.stop(c.currentTime+(.3+i*.4))}catch(e){}}function blast(){try{const c=new(window.AudioContext||window.webkitAudioContext)(),b=c.sampleRate*1.2,bf=c.createBuffer(1,b,c.sampleRate),d=bf.getChannelData(0);for(let i=0;i<b;i++)d[i]=(Math.random()*2-1)*Math.exp(-i/b*3);const s=c.createBufferSource();s.buffer=bf;const f=c.createBiquadFilter();f.type='lowpass';f.frequency.value=800;const g=c.createGain();g.gain.setValueAtTime(.6,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+1.2);s.connect(f);f.connect(g);g.connect(c.destination);s.start();const o=c.createOscillator(),og=c.createGain();o.type='square';o.frequency.setValueAtTime(3000,c.currentTime);o.frequency.exponentialRampToValueAtTime(100,c.currentTime+.1);og.gain.setValueAtTime(.4,c.currentTime);og.gain.exponentialRampToValueAtTime(.01,c.currentTime+.15);o.connect(og);og.connect(c.destination);o.start();o.stop(c.currentTime+.15)}catch(e){}}function sparkles(){const c=['#FFD700','#FFA500','#FF6347','#FF1493','#4169E1','#32CD32','#FFD93D','#00F5FF'],s=['⭐','✨','💫','🌟','⚡','🎆'];for(let i=0;i<50;i++){setTimeout(()=>{const a=(Math.PI*2*i)/50,p=document.createElement('div');p.className='particle';p.style.left='50%';p.style.top='50%';const l=document.createElement('div');l.className='sparkle-line';l.style.background=`linear-gradient(90deg,${c[i%c.length]},transparent)`;l.style.transform=`rotate(${a}rad)`;l.style.setProperty('--tx',`${Math.cos(a)*350}px`);l.style.setProperty('--ty',`${Math.sin(a)*350}px`);l.style.animation='shoot 1.2s ease-out forwards';p.appendChild(l);document.body.appendChild(p);setTimeout(()=>p.remove(),1200)},i*15)}for(let i=0;i<30;i++){setTimeout(()=>{const st=document.createElement('div');st.className='star';st.textContent=s[Math.floor(Math.random()*s.length)];st.style.left='50%';st.style.top='50%';st.style.color=c[Math.floor(Math.random()*c.length)];const a=Math.random()*Math.PI*2,d=250+Math.random()*250;st.style.setProperty('--tx',`${Math.cos(a)*d}px`);st.style.setProperty('--ty',`${Math.sin(a)*d}px`);st.style.animation='float 2s ease-out forwards';document.body.appendChild(st);setTimeout(()=>st.remove(),2000)},i*40)}}function confetti(){const c=['#FF6B6B','#4ECDC4','#45B7D1','#FFA07A','#98D8C8','#FFD93D','#6BCF7F','#F77F00','#667eea','#f093fb'];for(let i=0;i<150;i++){setTimeout(()=>{const cf=document.createElement('div');cf.className='confetti';cf.style.left=Math.random()*window.innerWidth+'px';cf.style.top='-10px';cf.style.background=c[Math.floor(Math.random()*c.length)];cf.style.animation=`fall ${Math.random()*2+2}s ease-out forwards`;cf.style.animationDelay=Math.random()*.3+'s';document.body.appendChild(cf);setTimeout(()=>cf.remove(),4500)},i*10)}}function validate(t){return/^[A-Za-z .-]{2,30}$/.test(t.trim())}function start(){try{n=document.getElementById('nameInput').value.trim();const e=document.getElementById('nameError');if(!validate(n)){e.textContent='Please enter your name to begin.';e.classList.remove('hidden');document.getElementById('nameInput').classList.add('error');return}sound(1);showDisclaimer()}catch(e){alert('Please refresh and try again.')}}function showDisclaimer(){const d=document.getElementById('disclaimer');d.classList.remove('hidden');setTimeout(()=>d.classList.add('show'),10);setTimeout(()=>{d.classList.remove('show');d.classList.add('hide');setTimeout(()=>{d.classList.add('hidden');d.classList.remove('hide');startQ()},300)},2500)}function startQ(){q=0;a={};showQ();show('questions')}function showQ(){const qu=qs[q],p=(q/5)*90;document.getElementById('qSpark').style.left=p+'%';document.getElementById('counter').textContent=`Question ${q+1} of 5`;document.getElementById('qText').textContent=qu.q;document.getElementById('back').style.display=q>0?'block':'none';const c=document.getElementById('opts');c.innerHTML='';qu.o.forEach(o=>{const b=document.createElement('button');b.className='option';b.textContent=o.t;b.onclick=()=>ans(o.k);c.appendChild(b)})}function ans(k){try{a[q+1]=k;const i=((q+1)/5)*2.5;sound(i);if(q<4){q++;setTimeout(showQ,400)}else{document.getElementById('qSpark').style.left='100%';setTimeout(()=>{document.getElementById('blast').classList.remove('hidden');blast();sparkles();confetti();setTimeout(()=>{calc();showR();document.getElementById('blast').classList.add('hidden');show('result')},2500)},600)}}catch(e){alert('Please try again.')}}function goBack(){if(q>0){q--;delete a[q+2];showQ()}}function calc(){try{const sc={P:0,B:0,L:0,K:0,J:0,G:0};for(let i=1;i<=5;i++)sc[cfg.m[`Q${i}`][a[i]]]+=cfg.w[`Q${i}`];const rk=Object.entries(sc).sort((x,y)=>y[1]-x[1]);let c=rk[0][0];const t=rk[0][1],s=rk[1][1];if(t-s<=1){const tk=rk[0][0],sk=rk[1][0];for(const[x,y,w]of cfg.p){const st=new Set([tk,sk]);if(st.has(x)&&st.has(y)){c=w;break}}if(t===s&&cfg.t[a[5]])c=cfg.t[a[5]]}const sw=cfg.s[c],ln=[];if(a[1]==='A')ln.push("You kept calm when things got loud – that's rare.");if(a[1]==='D')ln.push("You didn't just cope – you managed and moved.");if(a[3]==='C')ln.push('You turned mess into momentum (and a few laughs).');if(a[3]==='B')ln.push('You kept people fed and feelings safe.');if(a[4]==='A')ln.push("Your heart wants quiet – and it's allowed.");if(a[4]==='B')ln.push("You craved real support – that's honest.");if(a[2]==='D')ln.push('You protected your energy like a pro.');if(a[2]==='A')ln.push('You ran on low battery but still showed up.');if(a[5]==='C')ln.push('Humour was your survival kit – and it worked.');if(a[5]==='A')ln.push('You chose patience over panic – powerful.');r={sw,ln:ln.slice(0,2)}}catch(e){r={sw:cfg.s.L,ln:['You completed the journey!','Your positivity shines through.']}}}function showR(){document.getElementById('userName').textContent=n;const i=document.getElementById('sweet');i.crossOrigin='anonymous';i.src=r.sw.i;i.onload=()=>console.log('✅ Loaded');i.onerror=()=>console.error('❌ Failed');document.getElementById('rSweet').textContent=`You're a ${r.sw.n}!`;document.getElementById('rTitle').textContent=r.sw.t;document.getElementById('rMsg').textContent=r.sw.m;const l=document.getElementById('lines');l.innerHTML='';r.ln.forEach(t=>{const p=document.createElement('p');p.className='line';p.textContent=t;l.appendChild(p)})}function show(s){['landing','questions','result'].forEach(x=>document.getElementById(x).classList.add('hidden'));document.getElementById(s).classList.remove('hidden')}function loading(m='Loading...'){const l=document.createElement('div');l.id='loader';l.className='loading';l.innerHTML=`<div class="spinner"></div><div style="font-size:18px;font-weight:600">${m}</div>`;document.body.appendChild(l)}function hide(){const l=document.getElementById('loader');if(l)l.remove()}async function download(){try{loading('Generating...');const c=document.getElementById('card'),imgs=c.getElementsByTagName('img');await Promise.all(Array.from(imgs).map(i=>{if(i.complete&&i.naturalHeight!==0)return Promise.resolve();return new Promise(res=>{i.onload=res;i.onerror=res;setTimeout(res,3000)})}));const cv=await html2canvas(c,{scale:3,backgroundColor:'#ffffff',useCORS:true,allowTaint:false,logging:false});const l=document.createElement('a');l.download=`Diwali-${n}-${r.sw.n}.png`.replace(/\s+/g,'-');l.href=cv.toDataURL('image/png',1);l.click();hide();console.log('✅ Downloaded')}catch(e){hide();alert('Download failed. Try again.')}}async function share(){try{const t=`🎇 I have earned the title of "${r.sw.n}" - ${r.sw.t}! What about you? Light your cracker within this Diwali! 🪔\n\nVisit: https://makeeazy.in/diwali2025`;if(navigator.share){try{await navigator.share({title:'Light the Cracker Within - Diwali 2024',text:t});console.log('✅ Shared')}catch(e){if(e.name!=='AbortError')showOpts(t)}}else{showOpts(t)}}catch(e){alert('Share failed. Try again.')}}function showOpts(t){const m=document.createElement('div');m.style.cssText='position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:10000;padding:20px;animation:fadeIn .3s';const mob=window.innerWidth<=768;m.innerHTML=`<div style="background:#fff;border-radius:24px;padding:${mob?'32px 24px':'40px'};max-width:450px;width:100%;text-align:center;animation:slideUp .3s;box-shadow:0 20px 60px rgba(0,0,0,.4)"><div style="font-size:72px;margin-bottom:16px">🎁</div><h3 style="color:#32509F;margin-bottom:12px;font-size:${mob?'26px':'30px'};font-weight:700">Share Your Result!</h3><p style="color:#6B7280;margin-bottom:24px;font-size:${mob?'16px':'18px'};line-height:1.6">Spread the Diwali joy!<br>Choose how to share:</p><button id="wa" style="background:linear-gradient(135deg,#25D366 0%,#128C7E 100%);color:#fff;border:none;padding:${mob?'18px 28px':'20px 32px'};border-radius:14px;font-size:${mob?'18px':'20px'};font-weight:700;cursor:pointer;width:100%;margin-bottom:14px;box-shadow:0 4px 12px rgba(37,211,102,.4);transition:all .3s" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'"><span style="font-size:28px;vertical-align:middle">📱</span> Share on WhatsApp</button><button id="cp" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:${mob?'18px 28px':'20px 32px'};border-radius:14px;font-size:${mob?'18px':'20px'};font-weight:700;cursor:pointer;width:100%;margin-bottom:14px;box-shadow:0 4px 12px rgba(102,126,234,.4);transition:all .3s" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'"><span style="font-size:28px;vertical-align:middle">📋</span> Copy Text</button><button onclick="this.closest('div[style*=fixed]').remove()" style="background:transparent;color:#9CA3AF;border:none;padding:12px;font-size:16px;cursor:pointer;width:100%">Close</button></div>`;document.body.appendChild(m);document.getElementById('wa').onclick=()=>{m.remove();shareWA(t)};document.getElementById('cp').onclick=()=>{m.remove();copyText(t)};m.addEventListener('click',e=>{if(e.target===m)m.remove()})}async function shareWA(t){window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(t)}`,'_blank')}async function copyText(t){try{await navigator.clipboard.writeText(t);showCopied()}catch(e){prompt('Copy this text:',t)}}function showCopied(){const m=document.createElement('div');m.style.cssText='position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:10001;padding:20px;animation:fadeIn .3s';const mob=window.innerWidth<=768;m.innerHTML=`<div style="background:#fff;border-radius:24px;padding:${mob?'32px 24px':'40px'};max-width:450px;width:100%;text-align:center;animation:slideUp .3s"><div style="font-size:80px;margin-bottom:16px">✅</div><h3 style="color:#10B981;margin-bottom:16px;font-size:${mob?'26px':'30px'};font-weight:700">Text Copied!</h3><div style="background:#F0FDF4;border:2px solid #10B981;padding:24px;border-radius:16px;margin-bottom:24px"><p style="color:#065F46;font-size:${mob?'18px':'20px'};font-weight:600;line-height:1.8;margin:0">✅ Message copied to clipboard</p></div><div style="background:#EFF6FF;border-left:4px solid #667eea;padding:20px;border-radius:12px;margin-bottom:24px;text-align:left"><p style="color:#374151;font-size:${mob?'16px':'17px'};line-height:1.8;margin:0"><strong style="color:#667eea;display:block;margin-bottom:12px">📱 Share anywhere:</strong>1️⃣ Open any social app<br><span style="color:#6B7280;font-size:${mob?'14px':'15px'}">(Instagram, Facebook, Twitter, etc.)</span><br><br>2️⃣ Create a new post or message<br><br>3️⃣ Paste the copied text<br><span style="color:#6B7280;font-size:${mob?'14px':'15px'}">(Long press & select Paste)</span></p></div><button onclick="this.closest('div[style*=fixed]').remove()" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:${mob?'18px 32px':'20px 36px'};border-radius:14px;font-size:${mob?'18px':'20px'};font-weight:700;cursor:pointer;width:100%;box-shadow:0 4px 12px rgba(102,126,234,.4)">Got it! 👍</button></div>`;document.body.appendChild(m);m.addEventListener('click',e=>{if(e.target===m)m.remove()})}document.getElementById('nameInput').addEventListener('input',function(){document.getElementById('startBtn').disabled=this.value.trim().length<2;document.getElementById('nameError').classList.add('hidden');this.classList.remove('error')});document.getElementById('nameInput').addEventListener('keypress',function(e){if(e.key==='Enter'&&this.value.trim().length>=2)start()});window.addEventListener('load',()=>{console.log('✅ Ready');preload()});window.addEventListener('error',e=>console.error('❌',e.error));window.addEventListener('unhandledrejection',e=>console.error('❌',e.reason));
</script>
</body>
</html>
